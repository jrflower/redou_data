<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>红豆杉市场价值</title>
    <!--js调用-->
    <script src="https://assets.pyecharts.org/assets/echarts.min.js"></script>
    <script src="https://jrflower.github.io/redou_data/lib/world.js"></script>
    <!--css修饰-->
    <style>
        #charts {
            width: 100%;
            height: 730px;
            border-radius: 10px;
        }

        body {
            background-color: #5c636e
        }
    </style>

</head>
<body>
<div id="charts">

</div>

<script>
    //User-agent
    var planePath =
        'path://Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,' +
        ' like Gecko) Chrome/92.0.4515.131 Safari/537.36 Edg/92.0.902.73';
    //坐标转换函数
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
                res.push([{
                    coord: [fromCoord[0], fromCoord[1]]
                }, {
                    coord: [toCoord[0], toCoord[1]]
                }]);
            }
        }
        return res;
    };

    //世界地理位置
    var geoCoordMap = {
        '阿根廷': [-58, -35, '紫杉醇制剂品进口国'],
        '澳大利亚': [149, -35, '紫杉醇制剂品进口国'],
        '墨西哥': [-99, 19, '紫杉醇制剂品进口国'],
        '加拿大': [-76, 45, '紫杉醇制剂品进口国'],
        '中国': [116, 40, '紫杉醇制剂品进口国'],
        '朝鲜': [126, 39, '紫杉醇制剂品进口国'],
        '意大利': [12, 42, '紫杉醇制剂品进口国'],
        '韩国': [127, 38, '紫杉醇制剂品进口国'],
        '美国': [-77, 39, '紫杉醇原料药进口国'],
        '印度': [77.21, 28.61, '紫杉醇制剂品进口国'],
        '缅甸': [96.43, 19.99, '紫杉醇制剂品进口国'],
        '英国': [0.185, 51.5, '紫杉醇制剂品进口国'],
        '日本': [139.5, 35.5, '紫杉醇制剂品进口国']
    }

    //出口节点
    var ChinaData = [[{"name": '中国'}, {"name": '美国'}]];
    var ArgentinaData = [[{"name": '阿根廷'}, {"name": '美国'}]];
    var AustraliaData = [[{"name": '澳大利亚'}, {"name": '美国'}]];
    var MexicoData = [[{"name": '墨西哥'}, {"name": '美国'}]];
    var CanadaData = [[{"name": '加拿大'}, {"name": '美国'}]];
    var KoreaData = [[{"name": '朝鲜'}, {"name": '美国'}]];
    var ItalyData = [[{"name": '意大利'}, {"name": '美国'}]];
    var South_KoreaData = [[{"name": '韩国'}, {"name": '美国'}]];
    var IndiaData = [[{"name": '印度'}, {"name": '美国'}]];
    var MyanmarData = [[{"name": '缅甸'}, {"name": '美国'}]];

    //进口节点
    var USData = [
        [{"name": '美国'}, {"name": '中国'}],
        [{"name": '美国'}, {"name": '英国'}],
        [{"name": '美国'}, {"name": '日本'}],
        [{"name": '美国'}, {"name": '澳大利亚'}],
        [{"name": '美国'}, {"name": '印度'}],
        [{"name": '美国'}, {"name": '加拿大'}],
    ];
    var series = [];

    //轨迹展现
    var arr_1 = [
        ['中国', ChinaData, '原料药'],
        ['阿根廷', ArgentinaData, '少量原料药'],
        ['澳大利亚', AustraliaData, '原料药'],
        ['墨西哥', MexicoData, '少量原料药'],
        ['加拿大', CanadaData, '初级加工品'],
        ['朝鲜', KoreaData, '红豆杉枝叶'],
        ['意大利', ItalyData, '初级加工品'],
        ['韩国', South_KoreaData, '原料药'],
        ['印度', IndiaData, '初级加工品'],
        ['缅甸', MyanmarData, '红豆杉枝叶']
    ]
    arr_1.forEach(
        function (item) {
            series.push(
                {
                    data: convertData(item[1]),
                    name: '出口',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true, //启用飞行效果
                        period: 7, //飞行速度
                        trailLength: 0.2, //飞行线的拖尾
                        color: '#ffcc00', //飞行线的颜色
                        symbolSize: 7 //飞行线的宽度
                    },
                    lineStyle: {
                        normal: {
                            color: '#ffcc00',
                            width: 0,
                            curveness: 0.5//飞行线的弯曲程度
                        }
                    },

                },//动态轨迹线

                {
                    data: convertData(item[1]),
                    name: item[0] + '  出口' + item[2],
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0,//飞行线的拖尾
                        symbol: planePath,
                        symbolSize: 100
                    },
                    //飞行线底线的样式
                    lineStyle: {
                        normal: {
                            color: '#2e94b9',
                            width: 1.3,
                            opacity: 0.6,//轨迹透明度
                            curveness: 0.5 //飞行线底线的弯曲程度
                        }
                    },
                },//静态轨迹线

                {
                    type: 'scatter',
                    coordinateSystem: 'geo',
                    zlevel: 1,
                    rippleEffect: {
                        brushType: 'stroke'
                    }, //波浪样式
                    label: {
                        show: 'cross',
                        position: 'right',
                        formatter: '{b}'
                    },
                    symbolSize: '10',
                    itemStyle: {
                        color: '#ffcc00'
                    },//为不同系列节点设置颜色

                    data: item[1].map(function (dataItem) {
                        var box = geoCoordMap[dataItem[1].name]
                        return {
                            name: dataItem[1].name,//[name]
                            value: box//[坐标]
                        };
                    })
                });//城市点样式设置
        });

    var arr_2 = [['美国', USData, '制剂品'],]
    arr_2.forEach(
        function (item) {
            series.push(
                {
                    data: convertData(item[1]),
                    name: item[0] + '  出口' + item[2],
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true, //启用飞行效果
                        period: 7, //飞行速度
                        trailLength: 0.3, //飞行线的拖尾
                        color: '#4ecca3', //飞行线的颜色
                        symbolSize: 7//飞行线的宽度
                    },
                    lineStyle: {
                        normal: {
                            color: '#4ecca3',
                            width: 1.3,
                            curveness: 0.5//飞行线的弯曲程度
                        }
                    },

                },//动态轨迹线

                {
                    type: 'scatter',
                    hoverAnimation: true,
                    coordinateSystem: 'geo',
                    zlevel: 1,
                    showEffectOn: 'emphasis',
                    rippleEffect: {
                        brushType: 'stroke'
                    }, //波浪样式
                    emphasis: {
                        label: {
                            show: true
                        }
                    },
                    label: {
                        normal: {
                            show: true,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: '10',
                    itemStyle: {
                        color: '#4ecca3',
                        shadowBlur: 2,
                        shadowColor: '#028090'
                    },//为不同系列节点设置颜色
                    data: item[1].map(function (dataItem) {
                        var box = geoCoordMap[dataItem[1].name]
                        return {
                            name: dataItem[1].name,//[name]
                            value: box//[坐标]
                        };
                    })
                });//城市点样式设置
        });

    //设置
    option = {
        backgroundColor: '#f2f2f2', //地图背景色
        title: {
            text: '全球红豆杉制品进出口',
            subtext: '本名图仅展示主要进出口国',
            left: 'left',
            top: '15',
            textStyle: {
                color: '#393e46',
                fontSize: '20',

            }
        },//标题设置
        geo: {
            map: 'world',
            roam: false,
            label: {
                emphasis: {
                    show: true
                }
            },
            itemStyle: {
                normal: {
                    areaColor: '#393e46',
                    borderColor: '#5c636e'
                },//地图颜色设置
                emphasis: {
                    areaColor: '#f96d00'
                }//选中颜色设置
            }//地图底图颜色设置
        },//地理设置
        series: series,//数据样式设置
        tooltip: {
            show: true,
            trigger: "item", //触发类型
            triggerOn: "mousemove|click",//触发的条件
            axisPointer: {"type": "line"}, //指示器类型
            showContent: true, //显示提示框
            alwaysShowContent: false, //是否需要一直显示提示框
            showDelay: 0,
            hideDelay: 100,
            textStyle: {
                "fontSize": 14
            },
            borderWidth: 0,
            padding: 5
        }//触发设置
    }

    var chart = echarts.init(document.getElementById('charts'));
    chart.setOption(option);
</script>
</body>

</html>
